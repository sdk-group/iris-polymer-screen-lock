<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-spinner/paper-spinner.html">


<dom-module id="iris-screen-lock">
  <template>
    <style include="shared-styles"></style>
    <style>
      :host {
        @apply(--layout);
        @apply(--layout-fit);
        @apply(--layout-center-justified);
        z-index: 997;
      }
      
      .content {
        @apply(--layout-center-justified);
        @apply(--layout-vertical);
        @apply(--layout-center);
        font-size: 25px;
        z-index: 999;
      }
      
      .content .message {
        margin-top: 25px;
        color: var(--mydoc-red-800);
      }
      
      paper-spinner {
        width: 250px;
        height: 250px;
        display: block;
      }
      
      #backdrop {
        @apply(--layout-fit);
        opacity: 0.6;
        background: var(--mydoc-beige-200);
        z-index: 998;
      }
    </style>

    <div class="content">
      <paper-spinner alt$="{{message}}" active></paper-spinner>
      <div class="message">
        {{message}}
      </div>
    </div>

    <div id='backdrop'>
    </div>
  </template>

  <script>
    'use strict';
    (function() {

      Polymer({
        is: 'iris-screen-lock',
        properties: {
          message: {
            type: String,
            value: "Подождите"
          }
        },
        ready() {
          this.hidden = true;
          this.timer = false;
        },
        lock() {
          if (this.timer) clearTimeout(this.timer);

          this.timer = setTimeout(() => {
            this.unlock();
          }, 30000);

          this.hidden = false;
        },
        unlock() {
          if (this.timer) clearTimeout(this.timer);
          this.hidden = true;
        }
      });
    })();
  </script>

</dom-module>